<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Semiconductor Physics Tool</title>
    <link rel="stylesheet" href="{{ url_for('statics', filename='style.css') }}">
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>
<body>
<div class="container">
    <h1>⚡ Semiconductor Physics Interactive Tool ⚡</h1>

    <!-- Input Section -->
    <div class="input-section">
        <h2>Input Parameters</h2>
        <form method="POST" class="input-form">
            {% for label, name, value, step in [
                ('Nc (cm^-3)','Nc', Nc, '1e16'),
                ('Nv (cm^-3)','Nv', Nv, '1e16'),
                ('Eg (eV)','Eg', Eg, '0.01'),
                ('Nd (cm^-3)','Nd', Nd, '1e16'),
                ('Temperature T (K)','T', T, '1'),
                ('Relaxation Time τ (s)','tau', tau, '1e-16'),
                ('Fermi Velocity vF (m/s)','vF', vF, '1e5'),
                ('Effective Mass m* (kg)','m_eff', m_eff, '1e-32'),
                ('Lattice constant a (m)','a', a, '1e-10'),
                ('Barrier height V0 (eV)','V0', V0, '1'),
                ('Barrier width b (m)','b', b, '1e-10')
            ] %}
            <label>{{ label }} <input type="number" step="{{ step }}" name="{{ name }}" value="{{ value }}"></label>
            {% endfor %}
            <button type="submit">Compute / Update Graphs</button>
        </form>
    </div>

    <!-- Results Section -->
    <div class="results">
        <h2>Calculated Results</h2>
        {% for title, formula, val, unit in [
            ('Intrinsic carrier concentration (ni)','ni = √(Nc·Nv)·exp(-Eg/(2·kB·T))', ni, 'cm^-3'),
            ('Fermi level Ef (n-type)','Ef = Ec + kB·T·ln(Nd/ni)', Ef, 'eV'),
            ('Electron concentration n','n = Nc·exp(-(Ec-Ef)/(kB·T))', n, 'cm^-3'),
            ('Hole concentration p','p = Nv·exp(-(Ef-Ev)/(kB·T))', p, 'cm^-3'),
            ('Mobility μ','μ = q·τ/m*', mu, 'cm^2/V.s'),
            ('Conductivity σ','σ = n·q·μ', sigma, 'S/cm'),
            ('Mean free path l','l = vF·τ', l, 'm')
        ] %}
        <div class="result-card">
            <p><strong>{{ title }}</strong></p>
            <p>Formula: <code>{{ formula }}</code></p>
            <p>Value: {{ '{:.3e}'.format(val) if val>1e-2 else '{:.2e}'.format(val) }} {{ unit }}</p>
        </div>
        {% endfor %}
    </div>

    <!-- Plots Section -->
    <div class="plots">
        <h2>Interactive Plots</h2>
        {{ plot_div1 | safe }}
        {{ plot_div2 | safe }}

        <h3>Kronig-Penney 1D Plot</h3>
        {{ kp_plot_1d | safe }}
        <h3>Kronig-Penney 2D Plot</h3>
        {{ kp_plot_2d | safe }}

        <h3>Reciprocal Lattice 3D Plot</h3>
        {{ plot_div_rl | safe }}
    </div>

    <a href="/contact" class="contact-link">Contact Me</a>
</div>
</body>
</html>
